import './polyfills.server.mjs';
import{a as O}from"./chunk-Z6NSH6YO.mjs";import{a as J}from"./chunk-SWYWV3ZB.mjs";import"./chunk-LRBJKBFP.mjs";import{a as x}from"./chunk-CLRWAFXV.mjs";import{a as Z,b as S,c as K,d as Q,e as W,f as X,g as Y,i as ee,k as te}from"./chunk-VWO26PIK.mjs";import{b as N,c as R}from"./chunk-25DAVXLX.mjs";import{j as $,l as B,m as H,n as L}from"./chunk-WCSR7PXZ.mjs";import{$ as C,$a as g,Ba as a,Ca as P,Ja as h,La as m,M as U,Pa as _,Qa as w,Ra as v,S as M,Sa as b,Ta as s,Ua as r,V as I,Va as p,Wa as E,_ as k,ab as c,bb as A,gb as d,hb as f,ib as D,k as j,mb as V,nb as z,ob as q,pa as F,pb as G,v as T}from"./chunk-OTUGFJMP.mjs";import"./chunk-VVCT4QZE.mjs";function re(t,i){if(t&1&&(s(0,"span",6),d(1),r()),t&2){let n=i.$implicit;a(),f(n)}}var ne=(()=>{let i=class i{constructor(){this.theme="light"}};i.\u0275fac=function(l){return new(l||i)},i.\u0275cmp=I({type:i,selectors:[["app-skill-detail"]],inputs:{detailSkill:"detailSkill",theme:"theme"},standalone:!0,features:[V],decls:11,vars:4,consts:[[1,"card",3,"ngClass"],[1,"card-body"],[1,"card-title"],[1,"card-text","mt-2","fs-7","text-secondary"],[1,"btn","btn-dark","rounded-pill",3,"href"],[1,"bi-github"],[1,"badge","text-secondary","fw-lighter","bg-light","me-1"],["class","badge text-secondary fw-lighter bg-light me-1"]],template:function(l,o){l&1&&(s(0,"div",0)(1,"div",1)(2,"h5",2),d(3),r(),v(4,re,2,1,"span",7,w),s(6,"p",3),d(7),r(),s(8,"a",4),p(9,"i",5),d(10," GitHub "),r()()()),l&2&&(m("ngClass",o.theme=="light"?"bg-dark text-white":""),a(3),f(o.detailSkill.title),a(),b(o.detailSkill.skill.split(",")),a(3),f(o.detailSkill.description),a(),A("href",o.detailSkill.git,F))},dependencies:[$]});let t=i;return t})();var y=class{handleError(i){return i.status===0?console.error("An error occurred:",i.error):console.error(`Backend returned code ${i.status}, body was: `,i.error),j(()=>new Error("Something bad happened; please try again later."))}};var le=(()=>{let i=class i{constructor(){this.http=M(R)}fetchSkillId(e){return this.http.get(`${x.apiSkillsUrl}/skill/id=${e}`).pipe(T(new y().handleError))}fetchAllSkills(){return this.http.get(`${x.apiSkillsUrl}`).pipe(T(new y().handleError))}postSkill(e){return this.http.post(x.apiSkillsUrl,e)}getAllSkillsPage(e,l,o){let u=new N().append("search",e.toString()).append("size",l.toString()).append("page",o.toString());return this.http.get(`${x.apiSkillsUrl}/search`,{params:u}).pipe(T(new y().handleError))}deleteSkill(e){let l=new N().append("id",e);return this.http.delete(`${x.apiSkillsUrl}/delete`,{params:l})}updateSkill(e,l){let o=new N().append("id",l);return this.http.put(`${x.apiSkillsUrl}/update`,e,{params:o})}};i.\u0275fac=function(l){return new(l||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function oe(t,i){if(t&1&&(s(0,"span",9),d(1),r()),t&2){let n=c();a(),f(n.notification)}}var se=(t,i)=>i.title;function de(t,i){if(t&1){let n=E();s(0,"a",23),g("click",function(){k(n);let l=c().$implicit,o=c(3);return C(o.updateFormsSkill(l))}),p(1,"i",24),r(),s(2,"a",23),g("click",function(){k(n);let l=c().$implicit,o=c(3);return C(o.deleteSkill(l.idSkills))}),p(3,"i",25),r()}}function ce(t,i){if(t&1){let n=E();s(0,"a",26),g("click",function(){k(n);let l=c().$implicit,o=c(3);return C(o.showDetail(l.idSkills))}),p(1,"i",27),r()}}function me(t,i){if(t&1&&(s(0,"span",28),d(1),r()),t&2){let n=i.$implicit;a(),f(n)}}function pe(t,i){if(t&1&&(s(0,"div",13)(1,"div",14)(2,"div",15)(3,"span",16),d(4),z(5,"date"),r(),h(6,de,4,0),s(7,"a",17),p(8,"i",18),d(9," GitHub "),r(),h(10,ce,2,0,"a",19),r(),s(11,"div",20)(12,"h4",21),d(13),r(),s(14,"p",22),d(15),r(),v(16,me,2,1,"span",29,w),r()()()),t&2){let n=i.$implicit,e=c(3);a(),m("ngClass",e.theme=="light"?"bg-dark text-white":""),a(3),f(G(5,7,n.dateIn,"dd MMMM")),a(2),_(6,e.authService.isAuthenticed()?6:-1),a(),A("href",n.git,F),a(3),_(10,e.authService.isAuthenticed()?-1:10),a(3),D(" ",n.title," "),a(2),D(" ",n.description," "),a(),b(n.skill.split(","))}}function ue(t,i){if(t&1){let n=E();s(0,"li",32)(1,"a",33),g("click",function(){let o=k(n).$index,u=c(4);return C(u.goToPage(o))}),d(2),r()()}if(t&2){let n=i.$index,e=c(3);m("ngClass",e.pageable.pageNumber==n?"active":""),a(2),f(n+1)}}function ge(t,i){if(t&1&&(s(0,"div",30)(1,"nav")(2,"ul",31),v(3,ue,3,2,"li",34,w),r()()()),t&2){let n=c(2),e=c();a(3),b(e.Array(n.totalPages).fill(0))}}function he(t,i){if(t&1&&(s(0,"div",11),v(1,pe,18,10,"div",35,se),h(3,ge,5,0,"div",12),r()),t&2){let n=c();a(),b(n.content),a(2),_(3,n.totalPages?3:-1)}}function _e(t,i){t&1&&(s(0,"div",36)(1,"span",37),p(2,"i",38),d(3," Aucune comp\xE9tence n\u2019est ajout\xE9e! "),r()())}function fe(t,i){t&1&&h(0,he,4,1,"div",10)(1,_e,4,0),t&2&&_(0,i.content.length>0?0:1)}function Se(t,i){if(t&1&&(s(0,"div",36)(1,"div",39)(2,"span",40),d(3,"Loading..."),r()()()),t&2){let n=c();a(),m("ngClass",n.theme=="light"?"text-light":"text-dark")}}function ke(t,i){if(t&1&&(s(0,"div",41),p(1,"app-skill-detail",42),r()),t&2){let n=c();a(),m("theme",n.theme)("detailSkill",n.skillDetail)}}function Ce(t,i){if(t&1&&(s(0,"span",62),d(1),r()),t&2){let n=c(2);a(),D(" ",n.msgError," ")}}function xe(t,i){if(t&1){let n=E();s(0,"div",41)(1,"div",43)(2,"div",44)(3,"button",45),g("click",function(){k(n);let l=c();return C(l.initFromSkills())}),p(4,"i",46),r()(),s(5,"div",47)(6,"h2",48),d(7,"Formulaire"),r(),s(8,"form",49),g("ngSubmit",function(){k(n);let l=c();return C(l.onSubmit())}),h(9,Ce,2,1,"span",50),s(10,"div",51)(11,"label",52),d(12,"Titre"),r(),p(13,"input",53),r(),s(14,"div",51)(15,"label",54),d(16,"Competence"),r(),p(17,"input",55),r(),s(18,"div",51)(19,"label",52),d(20," Liens gitHub "),r(),p(21,"input",56),r(),s(22,"div",57)(23,"label",58),d(24,"Description"),r(),p(25,"textarea",59),r(),s(26,"div",60)(27,"button",61),d(28," Sauvegarder "),r()()()()()()}if(t&2){let n=c();a(),m("ngClass",n.theme=="light"?"bg-dark text-white":""),a(7),m("formGroup",n.formSkills),a(),_(9,n.msgError?9:-1),a(18),m("disabled",n.formSkills.invalid)}}var Me=(()=>{let i=class i{constructor(e,l,o,u){this.fb=e,this.skillsService=l,this.authService=o,this.themeService=u,this.Array=Array,this.defaultPage=0,this.defaultSize=3,this.theme="light",this.formSearch=this.fb.nonNullable.group({name:[""]})}ngOnInit(){this.themeService.currentTheme.subscribe(l=>{this.theme=l}),this.initFromSkills();let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage)}initFromSkills(){this.formSkills=this.fb.group({id:[0],title:["",S.required],skill:["",S.required],git:["",S.required],dateIn:[new Date],description:["",S.required]})}getAllSkillsPage(e,l,o){this.listSkills$=this.skillsService.getAllSkillsPage(e,l,o)}_formatPatternURL(){return/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/}skillsFilter(){let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.goToPage(0)}inputSearch(){setTimeout(()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.goToPage(0)},300)}onSubmit(){this.formSkills.valid?this.formSkills.value.id===0?this.skillsService.postSkill(this.formSkills.value).subscribe({next:()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.formSkills.reset()},error:e=>this.msgError=e}):this.skillsService.updateSkill(this.formSkills.value,this.formSkills.value.id).subscribe({next:()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.formSkills.reset()}}):this.msgError="Completer les champs"}goToPage(e){this.defaultPage=e,this.ngOnInit()}deleteSkill(e){this.skillsService.deleteSkill(e).subscribe({next:()=>{let l=this.formSearch.controls.name.value;this.getAllSkillsPage(l,this.defaultSize,this.defaultPage)}})}updateFormsSkill(e){this.formSkills=this.fb.group({id:[e.idSkills],title:[e.title,S.required],skill:[e.skill,S.required],git:[e.git,S.required],dateIn:[new Date],description:[e.description,S.required]})}showDetail(e){this.skillsService.fetchSkillId(e).subscribe(l=>{this.skillDetail=l,console.log("Skill Detail: "+JSON.stringify(l))})}};i.\u0275fac=function(l){return new(l||i)(P(ee),P(le),P(O),P(J))},i.\u0275cmp=I({type:i,selectors:[["app-skill-page"]],standalone:!0,features:[V],decls:12,vars:10,consts:[[1,"col-12","col-md-4","d-flex","position-relative",3,"formGroup","ngSubmit"],["type","text","formControlName","name","id","search","placeholder","Recherche...",1,"form-control","rounded-pill","pe-5",3,"ngClass","input"],[1,"btn","btn-sm","rounded-circle","d-flex","align-items-center","position-absolute","end-0","top-0","m-1",3,"ngClass","click"],[1,"bi-search"],[1,"row","mt-md-4","mt-2"],[3,"ngClass"],["class","alert alert-info"],["class","col-lg-4 my-4 my-lg-0",4,"ngIf"],["class","col-lg-4 my-4 my-lg-0"],[1,"alert","alert-info"],["class","d-grid gap-1"],[1,"d-grid","gap-1"],["class","bd-example mt-4"],[1,"col"],[1,"card","border-0",3,"ngClass"],[1,"position-absolute","end-0","m-2"],[1,"fs-7","badge","bg-light","text-secondary","rounded-pill","me-1"],["target","_blank",1,"btn","rounded-pill","btn-sm","btn-dark",3,"href"],[1,"bi","bi-github"],["class","btn rounded-pill btn-sm btn-light ms-1"],[1,"card-body"],[1,"card-title"],[1,"fs-7","text-secondary"],[1,"btn","btn-sm","bg-light","rounded-circle","me-1",3,"click"],[1,"bi-pen","text-secondary"],[1,"bi-trash-fill","text-danger"],[1,"btn","rounded-pill","btn-sm","btn-light","ms-1",3,"click"],[1,"bi-arrow-right"],[1,"badge","text-secondary","fw-lighter","bg-light","me-1"],["class","badge text-secondary fw-lighter bg-light me-1"],[1,"bd-example","mt-4"],[1,"pagination","pagination-sm"],[1,"page-item",3,"ngClass"],[1,"page-link","cursor-pointer",3,"click"],["class","page-item",3,"ngClass"],["class","col"],[1,"d-flex","justify-content-center"],[1,"border","px-2","py-1","rounded-pill","text-secondary","fs-7","bg-white","shadow-sm"],[1,"bi-exclamation-diamond"],["role","status",1,"spinner-border",3,"ngClass"],[1,"visually-hidden"],[1,"col-lg-4","my-4","my-lg-0"],[3,"theme","detailSkill"],[1,"card","rounded-0","shadow",3,"ngClass"],[1,"position-absolute","end-0","m-1"],[1,"btn","btn-sm","btn-danger","rounded-circle","p-0","d-flex","justify-content-center","align-items-center",2,"width","20px","height","20px",3,"click"],[1,"bi","bi-x"],[1,"card-body","py-2"],[1,"ff-manuscript"],[3,"formGroup","ngSubmit"],["class","fs-7 text-danger"],[1,"my-1"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title","placeholder","Saisir votre titre...",1,"form-control"],["for","competence",1,"form-label"],["type","text","formControlName","skill","id","competence","placeholder","Saisir votre competence...",1,"form-control"],["type","text","formControlName","git","id","git","placeholder","Coller URL ...",1,"form-control"],[1,"my-2"],["for","description",1,"form-label"],["formControlName","description","id","description","placeholder","Description du projet...",1,"form-control"],[1,"mt-4"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"fs-7","text-danger"]],template:function(l,o){if(l&1&&(s(0,"form",0),g("ngSubmit",function(){return o.skillsFilter()}),s(1,"input",1),g("input",function(){return o.inputSearch()}),r(),s(2,"a",2),g("click",function(){return o.skillsFilter()}),p(3,"i",3),r()(),s(4,"div",4)(5,"div",5),h(6,oe,2,1,"span",6)(7,fe,2,1),z(8,"async"),h(9,Se,4,1),r(),h(10,ke,2,2,"div",7)(11,xe,29,4,"div",8),r()),l&2){let u;m("formGroup",o.formSearch),a(),m("ngClass",o.theme=="light"?"bg-dark text-light border-secondary text-white-placeholder":""),a(),m("ngClass",o.theme=="light"?"btn-light":"btn-dark"),a(3),m("ngClass",o.skillDetail||o.authService.isAuthenticed()?"col-lg-8":"col-lg-12"),a(),_(6,o.notification?6:-1),a(),_(7,(u=q(8,8,o.listSkills$))?7:9,u),a(3),m("ngIf",o.skillDetail),a(),_(11,o.authService.isAuthenticed()?11:-1)}},dependencies:[H,te,W,Z,K,Q,X,Y,B,$,L,ne],styles:[".text-white-placeholder[_ngcontent-%COMP%]::placeholder{color:#fff}"],data:{animation:[]}});let t=i;return t})();export{Me as SkillPageComponent};
