import './polyfills.server.mjs';
import{a as h}from"./chunk-CLRWAFXV.mjs";import{a as k,b as N,c as D,d as q,e as G,f as H,g as R,i as O,k as $}from"./chunk-VWO26PIK.mjs";import{a as T,c as j,f as V}from"./chunk-25DAVXLX.mjs";import{j as P}from"./chunk-WCSR7PXZ.mjs";import{$ as _,$a as g,Ba as s,Ca as p,Ja as u,La as c,M as v,Pa as f,Qa as S,Ra as w,S as x,Sa as M,Ta as n,Ua as o,V as C,Va as l,Wa as F,_ as y,ab as b,gb as d,hb as E,ib as I,mb as B}from"./chunk-OTUGFJMP.mjs";import"./chunk-VVCT4QZE.mjs";var A=(()=>{let e=class e{constructor(){this.http=x(j)}postMsg(r){let t={headers:new T().set("Content-Type","application/json")};return this.http.post(`${h.apiBardurl} ${h.keyAPI}`,r,t).pipe()}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function K(i,e){i&1&&(n(0,"div",15),d(1," Veuillez verifier votre connexion internet! "),l(2,"button",16),o())}function L(i,e){if(i&1&&(n(0,"div",17)(1,"div",18),l(2,"img",19),n(3,"div",20)(4,"div",0)(5,"div",21),d(6),o(),n(7,"p",22),d(8),o()()()()()),i&2){let a=e.$implicit;s(3),c("ngClass",a.role=="user"?"bg-primary text-white":"bg-white text-dark"),s(3),E(a.role),s(2),I(" ",a.parts[0].text," ")}}function Q(i,e){if(i&1&&(n(0,"div",13),u(1,K,3,0,"div",14),w(2,L,9,3,"div",23,S),o()),i&2){let a=b();s(),f(1,a.errorMsg?1:-1),s(),M(a.listMsg.contents)}}function U(i,e){if(i&1){let a=F();n(0,"div",24)(1,"button",25),g("click",function(){y(a);let t=b();return _(t.startDiscussion())}),l(2,"i",26),d(3," Cliquer pour d\xE9marrer la discussion ! "),o()()}}var oe=(()=>{let e=class e{constructor(r,t){this.fb=r,this.bardService=t,this.listMsg={contents:[]}}ngOnInit(){this.msgForm=this.fb.group({msg:["",N.required]})}inputRequest(r,t){return{role:r,parts:[{text:t}]}}startDiscussion(){this.msgForm.value.msg="Salut !",this.onSubmit()}onSubmit(){if(this.msgForm.value.msg!=""){let r=this.inputRequest("user",this.msgForm.value.msg);this.listMsg.contents.push(r),this.bardService.postMsg(this.listMsg).subscribe({next:t=>{let m=this.inputRequest(t.candidates[0].content.role,t.candidates[0].content.parts[0].text);this.listMsg.contents.push(m)},error:t=>{this.errorMsg=t}}),this.msgForm.reset()}}};e.\u0275fac=function(t){return new(t||e)(p(O),p(A))},e.\u0275cmp=C({type:e,selectors:[["app-bard-page"]],standalone:!0,features:[B],decls:14,vars:3,consts:[[1,""],["class","d-flex flex-column h-content-msg overflow-y-scroll"],[1,"mt-4","card","rounded-0","position-fixed","bottom-0","mb-2","container","border-0",3,"formGroup","ngSubmit"],[1,"card-body","d-flex","gap-2"],[1,"btn","text-primary"],[1,"bi","bi-camera-fill"],[1,"btn","text-secondary"],[1,"bi","bi-mic"],[1,"position-relative","d-flex","w-100"],[1,"bi","bi-emoji-smile-fill","cursor-pointer","text-primary","position-absolute","end-0","me-2","fs-4"],["type","text","formControlName","msg","placeholder","Votre message...",1,"form-control","rounded-pill","pe-5"],["type","submit",1,"btn","btn-light","text-primary",3,"disabled"],[1,"bi","bi-send-fill"],[1,"d-flex","flex-column","h-content-msg","overflow-y-scroll"],["class","alert alert-danger alert-dismissible fade show m-1","role","alert"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","m-1"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],[1,"col-auto","my-1"],[1,"d-flex"],["src","assets/images/avatar.png","alt","avatar","width","25","height","25",1,"rounded-circle","bg-white","bg-opacity-50","border","border-2","border-white","p-1"],[1,"py-2","px-3","rounded","ms-2",3,"ngClass"],[1,"fw-semibold"],[1,"fs-7"],["class","col-auto my-1"],[1,"d-flex","justify-content-center"],[1,"border","px-2","py-1","rounded-pill","text-secondary","fs-7","bg-white","shadow-sm",3,"click"],[1,"bi-cursor-fill"]],template:function(t,m){t&1&&(n(0,"div",0),u(1,Q,4,1,"div",1)(2,U,4,0),n(3,"form",2),g("ngSubmit",function(){return m.onSubmit()}),n(4,"div",3)(5,"button",4),l(6,"i",5),o(),n(7,"button",6),l(8,"i",7),o(),n(9,"div",8),l(10,"i",9)(11,"input",10),o(),n(12,"button",11),l(13,"i",12),o()()()()),t&2&&(s(),f(1,m.listMsg.contents.length>0?1:2),s(2),c("formGroup",m.msgForm),s(9),c("disabled",m.msgForm.invalid))},dependencies:[$,G,k,D,q,H,R,V,P],styles:[".vh-content[_ngcontent-%COMP%]{height:calc(100vh - 68px)}.h-content-msg[_ngcontent-%COMP%]{height:calc(100vh - 148px)}"]});let i=e;return i})();export{oe as BardPageComponent};
