import{a as k}from"./chunk-TKDEOWQS.js";import{a as M}from"./chunk-R42VFOT2.js";import"./chunk-JCQCQXAS.js";import{a as K,b as S,c as Q,d as W,e as X,f as Y,g as ee,i as te,k as ie}from"./chunk-XATZ3OP2.js";import{b as L,c as J}from"./chunk-NC65UT2Y.js";import{a as Z}from"./chunk-HRTBZ3GG.js";import{h as D,j as H,k as R,l as O}from"./chunk-HIMYMI5D.js";import{$a as c,Aa as a,Ba as w,Ia as g,Ka as m,Oa as h,P as U,Pa as E,Qa as v,Ra as b,Sa as s,Ta as o,Ua as p,V as B,Va as P,Y as F,_a as u,ab as A,ba as C,ca as x,fb as d,gb as f,hb as $,lb as V,mb as N,n as j,nb as G,ob as q,ra as I,y as T}from"./chunk-SZSGA2LC.js";function oe(t,i){if(t&1&&(s(0,"span",6),d(1),o()),t&2){let n=i.$implicit;a(),f(n)}}var le=(()=>{let i=class i{constructor(){this.theme="light"}};i.\u0275fac=function(l){return new(l||i)},i.\u0275cmp=F({type:i,selectors:[["app-skill-detail"]],inputs:{detailSkill:"detailSkill",theme:"theme"},standalone:!0,features:[V],decls:11,vars:4,consts:[[1,"card",3,"ngClass"],[1,"card-body"],[1,"card-title"],[1,"card-text","mt-2","fs-7","text-secondary"],[1,"btn","btn-dark","rounded-pill",3,"href"],[1,"bi-github"],[1,"badge","text-secondary","fw-lighter","bg-light","me-1"],["class","badge text-secondary fw-lighter bg-light me-1"]],template:function(l,r){l&1&&(s(0,"div",0)(1,"div",1)(2,"h5",2),d(3),o(),v(4,oe,2,1,"span",7,E),s(6,"p",3),d(7),o(),s(8,"a",4),p(9,"i",5),d(10," GitHub "),o()()()),l&2&&(m("ngClass",r.theme=="light"?"bg-dark text-white":""),a(3),f(r.detailSkill.title),a(),b(r.detailSkill.skill.split(",")),a(3),f(r.detailSkill.description),a(),A("href",r.detailSkill.git,I))},dependencies:[D]});let t=i;return t})();var y=class{handleError(i){return i.status===0?console.error("An error occurred:",i.error):console.error(`Backend returned code ${i.status}, body was: `,i.error),j(()=>new Error("Something bad happened; please try again later."))}};var z=(()=>{let i=class i{constructor(){this.http=B(J)}fetchSkillId(e){return this.http.get(`${k.apiSkillsUrl}/skill/id=${e}`).pipe(T(new y().handleError))}fetchAllSkills(){return this.http.get(`${k.apiSkillsUrl}`).pipe(T(new y().handleError))}postSkill(e){return this.http.post(k.apiSkillsUrl,e)}getAllSkillsPage(e,l,r){let _=new L().append("search",e.toString()).append("size",l.toString()).append("page",r.toString());return this.http.get(`${k.apiSkillsUrl}/search`,{params:_}).pipe(T(new y().handleError))}deleteSkill(e){let l=new L().append("id",e);return this.http.delete(`${k.apiSkillsUrl}/delete`,{params:l})}updateSkill(e,l){let r=new L().append("id",l);return this.http.put(`${k.apiSkillsUrl}/update`,e,{params:r})}};i.\u0275fac=function(l){return new(l||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function re(t,i){if(t&1&&(s(0,"span",9),d(1),o()),t&2){let n=c();a(),f(n.notification)}}var se=(t,i)=>i.title;function de(t,i){if(t&1){let n=P();s(0,"a",23),u("click",function(){C(n);let l=c().$implicit,r=c(3);return x(r.updateFormsSkill(l))}),p(1,"i",24),o(),s(2,"a",23),u("click",function(){C(n);let l=c().$implicit,r=c(3);return x(r.deleteSkill(l.idSkills))}),p(3,"i",25),o()}}function ce(t,i){if(t&1){let n=P();s(0,"a",26),u("click",function(){C(n);let l=c().$implicit,r=c(3);return x(r.showDetail(l.idSkills))}),p(1,"i",27),o()}}function me(t,i){if(t&1&&(s(0,"span",28),d(1),o()),t&2){let n=i.$implicit;a(),f(n)}}function pe(t,i){if(t&1&&(s(0,"div",13)(1,"div",14)(2,"div",15)(3,"span",16),d(4),N(5,"date"),o(),g(6,de,4,0),s(7,"a",17),p(8,"i",18),d(9," GitHub "),o(),g(10,ce,2,0,"a",19),o(),s(11,"div",20)(12,"h4",21),d(13),o(),s(14,"p",22),d(15),o(),v(16,me,2,1,"span",29,E),o()()()),t&2){let n=i.$implicit,e=c(3);a(),m("ngClass",e.theme=="light"?"bg-dark text-white":""),a(3),f(q(5,7,n.dateIn,"dd MMMM")),a(2),h(6,e.authService.isAuthenticed()?6:-1),a(),A("href",n.git,I),a(3),h(10,e.authService.isAuthenticed()?-1:10),a(3),$(" ",n.title," "),a(2),$(" ",n.description," "),a(),b(n.skill.split(","))}}function _e(t,i){if(t&1){let n=P();s(0,"li",32)(1,"a",33),u("click",function(){let r=C(n).$index,_=c(4);return x(_.goToPage(r))}),d(2),o()()}if(t&2){let n=i.$index,e=c(3);m("ngClass",e.pageable.pageNumber==n?"active":""),a(2),f(n+1)}}function ue(t,i){if(t&1&&(s(0,"div",30)(1,"nav")(2,"ul",31),v(3,_e,3,2,"li",34,E),o()()()),t&2){let n=c(2),e=c();a(3),b(e.Array(n.totalPages).fill(0))}}function ge(t,i){if(t&1&&(s(0,"div",11),v(1,pe,18,10,"div",35,se),g(3,ue,5,0,"div",12),o()),t&2){let n=c();a(),b(n.content),a(2),h(3,n.totalPages?3:-1)}}function he(t,i){t&1&&(s(0,"div",36)(1,"span",37),p(2,"i",38),d(3," Aucune comp\xE9tence n\u2019est ajout\xE9e! "),o()())}function fe(t,i){t&1&&g(0,ge,4,1,"div",10)(1,he,4,0),t&2&&h(0,i.content.length>0?0:1)}function Se(t,i){if(t&1&&(s(0,"div",36)(1,"div",39)(2,"span",40),d(3,"Loading..."),o()()()),t&2){let n=c();a(),m("ngClass",n.theme=="light"?"text-light":"text-dark")}}function Ce(t,i){if(t&1&&(s(0,"div",41),p(1,"app-skill-detail",42),o()),t&2){let n=c();a(),m("theme",n.theme)("detailSkill",n.skillDetail)}}function xe(t,i){if(t&1&&(s(0,"span",62),d(1),o()),t&2){let n=c(2);a(),$(" ",n.msgError," ")}}function ke(t,i){if(t&1){let n=P();s(0,"div",41)(1,"div",43)(2,"div",44)(3,"button",45),u("click",function(){C(n);let l=c();return x(l.initFromSkills())}),p(4,"i",46),o()(),s(5,"div",47)(6,"h2",48),d(7,"Formulaire"),o(),s(8,"form",49),u("ngSubmit",function(){C(n);let l=c();return x(l.onSubmit())}),g(9,xe,2,1,"span",50),s(10,"div",51)(11,"label",52),d(12,"Titre"),o(),p(13,"input",53),o(),s(14,"div",51)(15,"label",54),d(16,"Competence"),o(),p(17,"input",55),o(),s(18,"div",51)(19,"label",52),d(20," Liens gitHub "),o(),p(21,"input",56),o(),s(22,"div",57)(23,"label",58),d(24,"Description"),o(),p(25,"textarea",59),o(),s(26,"div",60)(27,"button",61),d(28," Sauvegarder "),o()()()()()()}if(t&2){let n=c();a(),m("ngClass",n.theme=="light"?"bg-dark text-white":""),a(7),m("formGroup",n.formSkills),a(),h(9,n.msgError?9:-1),a(18),m("disabled",n.formSkills.invalid)}}var He=(()=>{let i=class i{constructor(e,l,r,_){this.fb=e,this.skillsService=l,this.authService=r,this.themeService=_,this.Array=Array,this.defaultPage=0,this.defaultSize=3,this.theme="light",this.formSearch=this.fb.nonNullable.group({name:[""]})}ngOnInit(){this.themeService.currentTheme.subscribe(l=>{this.theme=l}),this.initFromSkills();let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage)}initFromSkills(){this.formSkills=this.fb.group({id:[0],title:["",S.required],skill:["",S.required],git:["",S.required],dateIn:[new Date],description:["",S.required]})}getAllSkillsPage(e,l,r){this.listSkills$=this.skillsService.getAllSkillsPage(e,l,r)}_formatPatternURL(){return/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/}skillsFilter(){let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.goToPage(0)}inputSearch(){setTimeout(()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.goToPage(0)},300)}onSubmit(){this.formSkills.valid?this.formSkills.value.id===0||this.formSkills.value.id===null?this.skillsService.postSkill(this.formSkills.value).subscribe({next:()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.formSkills.reset()},error:e=>this.msgError=e}):this.skillsService.updateSkill(this.formSkills.value,this.formSkills.value.id).subscribe({next:()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.formSkills.reset()}}):this.msgError="Completer les champs"}goToPage(e){this.defaultPage=e;let l=this.formSearch.controls.name.value;this.getAllSkillsPage(l,this.defaultSize,this.defaultPage)}deleteSkill(e){this.skillsService.deleteSkill(e).subscribe({next:()=>{let l=this.formSearch.controls.name.value;this.getAllSkillsPage(l,this.defaultSize,this.defaultPage)}})}updateFormsSkill(e){this.formSkills=this.fb.group({id:[e.idSkills],title:[e.title,S.required],skill:[e.skill,S.required],git:[e.git,S.required],dateIn:[new Date],description:[e.description,S.required]})}showDetail(e){this.skillsService.fetchSkillId(e).subscribe(l=>{this.skillDetail=l,console.log("Skill Detail: "+JSON.stringify(l))})}};i.\u0275fac=function(l){return new(l||i)(w(te),w(z),w(M),w(Z))},i.\u0275cmp=F({type:i,selectors:[["app-skill-page"]],standalone:!0,features:[V],decls:12,vars:10,consts:[[1,"col-12","col-md-4","d-flex","position-relative",3,"formGroup","ngSubmit"],["type","text","formControlName","name","id","search","placeholder","Recherche...",1,"form-control","rounded-pill","pe-5",3,"ngClass","input"],[1,"btn","btn-sm","rounded-circle","d-flex","align-items-center","position-absolute","end-0","top-0","m-1",3,"ngClass","click"],[1,"bi-search"],[1,"row","mt-md-4","mt-2"],[3,"ngClass"],["class","alert alert-info"],["class","col-lg-4 my-4 my-lg-0",4,"ngIf"],["class","col-lg-4 my-4 my-lg-0"],[1,"alert","alert-info"],["class","d-grid gap-1"],[1,"d-grid","gap-1"],["class","bd-example mt-4"],[1,"col"],[1,"card","border-0",3,"ngClass"],[1,"position-absolute","end-0","m-2"],[1,"fs-7","badge","bg-light","text-secondary","rounded-pill","me-1"],["target","_blank",1,"btn","rounded-pill","btn-sm","btn-dark",3,"href"],[1,"bi","bi-github"],["class","btn rounded-pill btn-sm btn-light ms-1"],[1,"card-body"],[1,"card-title"],[1,"fs-7","text-secondary"],[1,"btn","btn-sm","bg-light","rounded-circle","me-1",3,"click"],[1,"bi-pen","text-secondary"],[1,"bi-trash-fill","text-danger"],[1,"btn","rounded-pill","btn-sm","btn-light","ms-1",3,"click"],[1,"bi-arrow-right"],[1,"badge","text-secondary","fw-lighter","bg-light","me-1"],["class","badge text-secondary fw-lighter bg-light me-1"],[1,"bd-example","mt-4"],[1,"pagination","pagination-sm"],[1,"page-item",3,"ngClass"],[1,"page-link","cursor-pointer",3,"click"],["class","page-item",3,"ngClass"],["class","col"],[1,"d-flex","justify-content-center"],[1,"border","px-2","py-1","rounded-pill","text-secondary","fs-7","bg-white","shadow-sm"],[1,"bi-exclamation-diamond"],["role","status",1,"spinner-border",3,"ngClass"],[1,"visually-hidden"],[1,"col-lg-4","my-4","my-lg-0"],[3,"theme","detailSkill"],[1,"card","rounded-0","shadow",3,"ngClass"],[1,"position-absolute","end-0","m-1"],[1,"btn","btn-sm","btn-danger","rounded-circle","p-0","d-flex","justify-content-center","align-items-center",2,"width","20px","height","20px",3,"click"],[1,"bi-x"],[1,"card-body","py-2"],[1,"ff-manuscript"],[3,"formGroup","ngSubmit"],["class","fs-7 text-danger"],[1,"my-1"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title","placeholder","Saisir votre titre...",1,"form-control"],["for","competence",1,"form-label"],["type","text","formControlName","skill","id","competence","placeholder","Saisir votre competence...",1,"form-control"],["type","text","formControlName","git","id","git","placeholder","Coller URL ...",1,"form-control"],[1,"my-2"],["for","description",1,"form-label"],["formControlName","description","id","description","placeholder","Description du projet...",1,"form-control"],[1,"mt-4"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"fs-7","text-danger"]],template:function(l,r){if(l&1&&(s(0,"form",0),u("ngSubmit",function(){return r.skillsFilter()}),s(1,"input",1),u("input",function(){return r.inputSearch()}),o(),s(2,"a",2),u("click",function(){return r.skillsFilter()}),p(3,"i",3),o()(),s(4,"div",4)(5,"div",5),g(6,re,2,1,"span",6)(7,fe,2,1),N(8,"async"),g(9,Se,4,1),o(),g(10,Ce,2,2,"div",7)(11,ke,29,4,"div",8),o()),l&2){let _;m("formGroup",r.formSearch),a(),m("ngClass",r.theme=="light"?"bg-dark text-light border-secondary text-white-placeholder":""),a(),m("ngClass",r.theme=="light"?"btn-light":"btn-dark"),a(3),m("ngClass",r.skillDetail||r.authService.isAuthenticed()?"col-lg-8":"col-lg-12"),a(),h(6,r.notification?6:-1),a(),h(7,(_=G(8,8,r.listSkills$))?7:9,_),a(3),m("ngIf",r.skillDetail),a(),h(11,r.authService.isAuthenticed()?11:-1)}},dependencies:[R,ie,X,K,Q,W,Y,ee,H,D,O,le],styles:[".text-white-placeholder[_ngcontent-%COMP%]::placeholder{color:#fff}"],data:{animation:[]}});let t=i;return t})();export{He as SkillPageComponent};
