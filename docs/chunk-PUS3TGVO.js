import{a as O,b as f,c as Z,d as J,e as K,f as Q,g as W,h as X,i as Y}from"./chunk-6RENTGQF.js";import{d as L}from"./chunk-JTO3ROKK.js";import{b as I,c as H}from"./chunk-BJSVZRFN.js";import{$ as C,$a as F,Ea as E,Ga as k,Ka as b,La as $,Ma as w,Na as T,O as z,Oa as r,Pa as l,Qa as d,Ra as A,T as G,Ta as c,Ua as u,Va as U,X as V,Za as m,_a as x,aa as y,db as D,eb as h,fb as S,gb as j,n as N,pa as B,vb as q,wa as s,xa as P,y as v,yb as M,zb as R}from"./chunk-XJY5DNQ3.js";var g={production:!1,apiSkillsUrl:"http://localhost:8082/skills"};var _=class{handleError(t){return t.status===0?console.error("An error occurred:",t.error):console.error(`Backend returned code ${t.status}, body was: `,t.error),N(()=>new Error("Something bad happened; please try again later."))}};var ee=(()=>{let t=class t{constructor(e){this.http=e}fetchSkills(){return this.http.get(`${g.apiSkillsUrl}`).pipe(v(new _().handleError))}fetchSkillOrTitle(e){return this.http.get(`${g.apiSkillsUrl}/search?search=${e}`).pipe(v(new _().handleError))}postSkill(e){return this.http.post(g.apiSkillsUrl,e)}getAllSkillsPage(e,n,o){let p=new I().append("search",e.toString()).append("size",n.toString()).append("page",o.toString());return this.http.get(`${g.apiSkillsUrl}/search`,{params:p}).pipe(v(new _().handleError))}deleteSkill(e){let n=new I().append("id",e);return this.http.delete(`${g.apiSkillsUrl}/delete`,{params:n})}updateSkill(e,n){let o=new I().append("id",n);return this.http.put(`${g.apiSkillsUrl}/update`,e,{params:o})}};t.\u0275fac=function(n){return new(n||t)(G(H))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function le(i,t){if(i&1&&(r(0,"span",28),m(1),l()),i&2){let a=u();s(),x(a.notification)}}var ne=(i,t)=>t.title;function re(i,t){if(i&1&&(r(0,"span",43),m(1),l()),i&2){let a=t.$implicit;s(),x(a)}}function ae(i,t){if(i&1){let a=A();r(0,"div",31)(1,"div",32)(2,"div",33)(3,"span",34),m(4),h(5,"date"),l(),r(6,"a",35),c("click",function(){let o=C(a).$implicit,p=u(2);return y(p.updateFormsSkill(o))}),d(7,"i",36),l(),r(8,"span",35),c("click",function(){let o=C(a).$implicit,p=u(2);return y(p.deleteSkill(o.idSkills))}),d(9,"i",37),l(),r(10,"a",38),d(11,"i",39),m(12," GitHub "),l()(),r(13,"div",40)(14,"h4",41),m(15),l(),r(16,"p",42),m(17),l(),w(18,re,2,1,"span",44,$),l()()()}if(i&2){let a=t.$implicit;s(4),x(j(5,4,a.dateIn,"dd MMMM")),s(6),U("href",a.git,B),s(5),F(" ",a.title," "),s(2),F(" ",a.description," "),s(),T(a.skill.split(","))}}function oe(i,t){if(i&1){let a=A();r(0,"li",47),h(1,"async"),r(2,"a",48),c("click",function(){let o=C(a).$index,p=u(3);return y(p.goToPage(o))}),m(3),l()()}if(i&2){let a=t.$index,e=u(3),n;k("ngClass",((n=S(1,2,e.listSkills$))==null?null:n.pageable.pageNumber)==a?"active":""),s(3),x(a+1)}}function se(i,t){if(i&1&&(r(0,"div",45)(1,"nav")(2,"ul",46),w(3,oe,4,4,"li",49,$),h(5,"async"),l()()()),i&2){let a=u(2),e;s(3),T(a.Array((e=S(5,0,a.listSkills$))==null?null:e.totalPages).fill(0))}}function me(i,t){if(i&1&&(r(0,"div",29),w(1,ae,20,7,"div",50,ne),h(3,"async"),E(4,se,6,2,"div",30),h(5,"async"),l()),i&2){let a=u(),e,n;s(),T((e=S(3,1,a.listSkills$))==null?null:e.content),s(3),b(4,(n=S(5,3,a.listSkills$))!=null&&n.totalPages?4:-1)}}function pe(i,t){if(i&1&&(r(0,"span",51),m(1),l()),i&2){let a=u();s(),F(" ",a.msgError," ")}}var Pe=(()=>{let t=class t{constructor(e,n,o){this.fb=e,this.skillGateway=n,this.route=o,this.Array=Array,this.defaultPage=0,this.defaultSize=3,this.formSearch=this.fb.nonNullable.group({name:[""]})}ngOnInit(){this.initFromSkills();let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage)}initFromSkills(){this.formSkills=this.fb.group({id:[0],title:["",f.required],skill:["",f.required],git:["",f.required],dateIn:[new Date],description:["",f.required]})}getAllSkillsPage(e,n,o){this.listSkills$=this.skillGateway.getAllSkillsPage(e,n,o),this.listSkills$.subscribe({next:p=>this.listSkills=p})}_formatPatternURL(){return/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/}skillsFilter(){let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.goToPage(0)}inputSearch(){setTimeout(()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.goToPage(0)},300)}onSubmit(){this.formSkills.valid?this.formSkills.value.id===0?this.skillGateway.postSkill(this.formSkills.value).subscribe({next:()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.formSkills.reset()},error:e=>this.msgError=e}):this.skillGateway.updateSkill(this.formSkills.value,this.formSkills.value.id).subscribe({next:()=>{let e=this.formSearch.controls.name.value;this.getAllSkillsPage(e,this.defaultSize,this.defaultPage),this.formSkills.reset()}}):this.msgError="Completer les champs"}goToPage(e){this.defaultPage=e,this.ngOnInit()}deleteSkill(e){this.skillGateway.deleteSkill(e).subscribe({next:()=>{let n=this.formSearch.controls.name.value;this.getAllSkillsPage(n,this.defaultSize,this.defaultPage)}})}updateFormsSkill(e){this.formSkills=this.fb.group({id:[e.idSkills],title:[e.title,f.required],skill:[e.skill,f.required],git:[e.git,f.required],dateIn:[new Date],description:[e.description,f.required]})}};t.\u0275fac=function(n){return new(n||t)(P(X),P(ee),P(L))},t.\u0275cmp=V({type:t,selectors:[["app-skill-page"]],standalone:!0,features:[D],decls:38,vars:8,consts:[[1,"col-12","col-md-4","d-flex","position-relative",3,"formGroup","ngSubmit"],["type","text","formControlName","name","id","search","placeholder","Recherche...",1,"form-control","rounded-pill","pe-5",3,"input"],[1,"d-flex","align-items-center","position-absolute","end-0","top-0","m-1",3,"click"],[1,"bi-search","btn","btn-sm","btn-dark","rounded-circle"],[1,"row","mt-md-4","mt-2"],[1,"col-lg-8"],["class","alert alert-info"],["class","d-grid gap-1"],[1,"col-lg-4","my-4","my-lg-0"],[1,"card","rounded-0","shadow"],[1,"position-absolute","end-0","m-1"],[1,"btn","btn-sm","btn-danger","rounded-circle","p-0","d-flex","justify-content-center","align-items-center",2,"width","20px","height","20px",3,"click"],[1,"bi","bi-x"],[1,"card-body","py-2"],[1,"ff-manuscript"],[3,"formGroup","ngSubmit"],["class","fs-7 text-danger"],[1,"my-1"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title","placeholder","Saisir votre titre...",1,"form-control"],["for","competence",1,"form-label"],["type","text","formControlName","skill","id","competence","placeholder","Saisir votre competence...",1,"form-control"],["type","text","formControlName","git","id","git","placeholder","Coller URL ...",1,"form-control"],[1,"my-2"],["for","description",1,"form-label"],["formControlName","description","id","description","placeholder","Description du projet...",1,"form-control"],[1,"mt-4"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"alert","alert-info"],[1,"d-grid","gap-1"],["class","bd-example mt-4"],[1,"col"],[1,"card","border-0"],[1,"position-absolute","end-0","m-2"],[1,"fs-7","badge","bg-light","text-secondary","rounded-pill","me-1"],[1,"btn","btn-sm","bg-light","rounded-circle","me-1",3,"click"],[1,"bi-pen","text-secondary"],[1,"bi-trash-fill","text-danger"],[1,"btn","rounded-pill","btn-sm","btn-dark",3,"href"],[1,"bi","bi-github"],[1,"card-body"],[1,"card-title"],[1,"text-body","fs-7","text-muted"],[1,"badge","text-secondary","fw-lighter","bg-light","me-1"],["class","badge text-secondary fw-lighter bg-light me-1"],[1,"bd-example","mt-4"],[1,"pagination","pagination-sm"],[1,"page-item",3,"ngClass"],[1,"page-link","cursor-pointer",3,"click"],["class","page-item",3,"ngClass"],["class","col"],[1,"fs-7","text-danger"]],template:function(n,o){n&1&&(r(0,"form",0),c("ngSubmit",function(){return o.skillsFilter()}),r(1,"input",1),c("input",function(){return o.inputSearch()}),l(),r(2,"span",2),c("click",function(){return o.skillsFilter()}),d(3,"i",3),l()(),r(4,"div",4)(5,"div",5),E(6,le,2,1,"span",6)(7,me,6,5,"div",7),h(8,"async"),l(),r(9,"div",8)(10,"div",9)(11,"div",10)(12,"button",11),c("click",function(){return o.initFromSkills()}),d(13,"i",12),l()(),r(14,"div",13)(15,"h2",14),m(16,"Formulaire"),l(),r(17,"form",15),c("ngSubmit",function(){return o.onSubmit()}),E(18,pe,2,1,"span",16),r(19,"div",17)(20,"label",18),m(21,"Titre"),l(),d(22,"input",19),l(),r(23,"div",17)(24,"label",20),m(25,"Competence"),l(),d(26,"input",21),l(),r(27,"div",17)(28,"label",18),m(29," Liens gitHub "),l(),d(30,"input",22),l(),r(31,"div",23)(32,"label",24),m(33,"Description"),l(),d(34,"textarea",25),l(),r(35,"div",26)(36,"button",27),m(37," Sauvegarder "),l()()()()()()()),n&2&&(k("formGroup",o.formSearch),s(6),b(6,o.notification?6:-1),s(),b(7,S(8,6,o.listSkills$)?7:-1),s(10),k("formGroup",o.formSkills),s(),b(18,o.msgError?18:-1),s(18),k("disabled",o.formSkills.invalid))},dependencies:[M,Y,K,O,Z,J,Q,W,q,R],data:{animation:[]}});let i=t;return i})();export{Pe as SkillPageComponent};
